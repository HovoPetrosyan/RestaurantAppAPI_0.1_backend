{"ast":null,"code":"var _jsxFileName = \"/Users/hovhannespetrosyan/RestaurantAppAPI_0.1/frontend/src/components/Bill.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styles from \"../style/Bill.module.css\";\nimport RemoveLine from \"./RemoveLine\";\nimport Edit from \"./Edit\";\nimport Pay from \"./Pay\";\nimport PayDone from \"./PayDone\";\nimport AddProduct from \"./AddProduct\";\nimport top from \"../assets/icons/top.png\";\nimport bottom from \"../assets/icons/bottom.png\";\nimport left from \"../assets/icons/left.png\";\nimport trash from \"../assets/icons/trash.png\";\nimport edit from \"../assets/icons/edit.png\";\nimport trashFill from \"../assets/icons/trash_fill.png\";\nimport editFill from \"../assets/icons/edit_fill.png\";\nimport orderFill from \"../assets/icons/order_fill.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Bill() {\n  _s();\n\n  const history = useHistory();\n  const parent = React.useRef(null);\n  const container = React.useRef(null);\n  const dispatch = useDispatch();\n  const [breadCrumbs, setBreadCrumbs] = React.useState([\"Հիմնական պատվերներ\"]);\n  const {\n    tableNumber,\n    checked,\n    menuItems\n  } = useSelector(state => state.bill);\n  const {\n    orderItems\n  } = useSelector(state => state.table);\n  const item = orderItems[tableNumber];\n  let price = 0;\n  item.billItems.forEach(e => {\n    price += e.amount * e.price;\n  });\n  React.useEffect(() => {\n    dispatch({\n      type: \"HALL\",\n      payload: \"Սրահ ։ Բառ\"\n    });\n    dispatch({\n      type: \"TABLE_NAME\",\n      payload: \"Սեղան ։ \" + tableNumber\n    });\n    dispatch({\n      type: \"TITLE\",\n      payload: \"\"\n    });\n  });\n\n  const handleChange = e => {\n    const checkboxes = parent.current.getElementsByTagName(\"input\");\n    let checkedElem = e.target.checked;\n\n    for (let elem of checkboxes) {\n      if (elem !== e.target) {\n        elem.checked = false;\n      }\n    }\n\n    const value = JSON.parse(e.target.value);\n\n    if (checkedElem) {\n      dispatch({\n        type: \"CHECKED\",\n        payload: true\n      });\n      dispatch({\n        type: \"REMOVE_LINE_ITEM\",\n        payload: value\n      });\n    } else {\n      dispatch({\n        type: \"CHECKED\",\n        payload: false\n      });\n      dispatch({\n        type: \"REMOVE_LINE_ITEM\",\n        payload: {}\n      });\n    }\n  };\n\n  const checkedOff = () => {\n    const checkboxes = parent.current.getElementsByTagName(\"input\");\n\n    for (let elem of checkboxes) {\n      elem.checked = false;\n    }\n  };\n\n  const handleClick = e => {\n    const name = e.currentTarget.getAttribute(\"value\");\n    const arr = [];\n    Object.assign(arr, breadCrumbs);\n    arr.push(name);\n    setBreadCrumbs(arr);\n  };\n\n  const back = () => {\n    const arr = [];\n    Object.assign(arr, breadCrumbs);\n    arr.pop();\n    setBreadCrumbs(arr);\n  };\n\n  const goToRemoveLine = () => {\n    dispatch({\n      type: \"REMOVE_LINE\",\n      payload: true\n    });\n  };\n\n  const goToEdit = () => {\n    dispatch({\n      type: \"EDIT\",\n      payload: true\n    });\n  };\n\n  const goToPay = () => {\n    dispatch({\n      type: \"PAY\",\n      payload: true\n    });\n  };\n\n  const up = () => {\n    container.current.scrollTo(0, container.current.scrollTop -= 157);\n  };\n\n  const down = () => {\n    container.current.scrollTo(0, container.current.scrollTop += 157);\n  };\n\n  const addProduct = (name, price) => {\n    dispatch({\n      type: \"ADD_PRODUCT\",\n      payload: true\n    });\n    dispatch({\n      type: \"NEW_ORDER\",\n      payload: {\n        name,\n        price\n      }\n    });\n  };\n\n  const toPayDone = () => {\n    dispatch({\n      type: \"PAY_DONE\",\n      payload: true\n    });\n    setTimeout(() => {\n      const arr = {};\n      Object.assign(arr, orderItems);\n      arr[tableNumber] = {\n        type: \"none\",\n        count: 0,\n        billItems: []\n      };\n      dispatch({\n        type: \"UPDATE_ORDER_COUNT\",\n        payload: arr\n      });\n      dispatch({\n        type: \"PAY_DONE\",\n        payload: false\n      });\n      history.goBack();\n    }, 900);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.box,\n    children: [/*#__PURE__*/_jsxDEV(RemoveLine, {\n      checkedOff: checkedOff\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Edit, {\n      checkedOff: checkedOff\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Pay, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PayDone, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(AddProduct, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.coupon,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u053F\\u057F\\u0580\\u0578\\u0576\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.couponContent,\n        ref: parent,\n        children: item.billItems.map((e, index) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.item,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"orderLine\",\n              onChange: handleChange,\n              value: JSON.stringify(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: e.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [e.amount, \" \", e.amountName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [e.price, \" \\u0534\\u0580\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [e.price * e.amount, \" \\u0534\\u0580\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 37\n            }, this)]\n          }, \"coupon-item\" + index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.price,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\u0538\\u0546\\u0534\\u0540\\u0531\\u0546\\u0548\\u0552\\u0550 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [price, \" \\u0564\\u0580\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 35\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.btn,\n            disabled: !checked,\n            onClick: goToRemoveLine,\n            children: !checked ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: trash\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 41\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: trashFill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 63\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.btn,\n            disabled: !checked ? true : false,\n            onClick: goToEdit,\n            children: !checked ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: edit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 41\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: editFill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 62\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.btn,\n            onClick: goToPay,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: orderFill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.pay,\n            onClick: toPayDone,\n            children: \"\\u054E\\u0543\\u0531\\u0550\\u0535\\u053C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.orders,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.breadCrumbs,\n        children: breadCrumbs.map((e, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [e, \" /\\xA0\"]\n        }, \"span\" + index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 52\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.meals,\n        ref: container,\n        children: menuItems.map((e, index) => {\n          if (breadCrumbs.length === 1) {\n            return /*#__PURE__*/_jsxDEV(\"section\", {\n              onClick: handleClick,\n              value: e.name,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: e.img\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: e.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 45\n              }, this)]\n            }, `meal-${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 41\n            }, this);\n          } else if (breadCrumbs[1] === e.name) {\n            return e.items.map((e, index) => {\n              return /*#__PURE__*/_jsxDEV(\"section\", {\n                name: e.name,\n                price: e.price,\n                onClick: () => addProduct(e.name, e.price),\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: e.img\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: e.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 49\n                }, this)]\n              }, `meals-item-${index}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 45\n              }, this);\n            });\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.buttons,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: up,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: top\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 38\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: back,\n        disabled: breadCrumbs.length === 1 ? true : false,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: left\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 91\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: down,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: bottom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 40\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Bill, \"/jlsrshDBd1igI2mdZH45Pce1xo=\", false, function () {\n  return [useHistory, useDispatch, useSelector, useSelector];\n});\n\n_c = Bill;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bill\");","map":{"version":3,"sources":["/Users/hovhannespetrosyan/RestaurantAppAPI_0.1/frontend/src/components/Bill.jsx"],"names":["React","useHistory","useDispatch","useSelector","styles","RemoveLine","Edit","Pay","PayDone","AddProduct","top","bottom","left","trash","edit","trashFill","editFill","orderFill","Bill","history","parent","useRef","container","dispatch","breadCrumbs","setBreadCrumbs","useState","tableNumber","checked","menuItems","state","bill","orderItems","table","item","price","billItems","forEach","e","amount","useEffect","type","payload","handleChange","checkboxes","current","getElementsByTagName","checkedElem","target","elem","value","JSON","parse","checkedOff","handleClick","name","currentTarget","getAttribute","arr","Object","assign","push","back","pop","goToRemoveLine","goToEdit","goToPay","up","scrollTo","scrollTop","down","addProduct","toPayDone","setTimeout","count","goBack","box","coupon","couponContent","map","index","stringify","amountName","btn","pay","orders","meals","length","img","items","buttons"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport styles from \"../style/Bill.module.css\";\r\nimport RemoveLine from \"./RemoveLine\";\r\nimport Edit from \"./Edit\"\r\nimport Pay from \"./Pay\";\r\nimport PayDone from \"./PayDone\";\r\nimport AddProduct from \"./AddProduct\";\r\nimport top from \"../assets/icons/top.png\";\r\nimport bottom from \"../assets/icons/bottom.png\";\r\nimport left from \"../assets/icons/left.png\";\r\nimport trash from \"../assets/icons/trash.png\";\r\nimport edit from \"../assets/icons/edit.png\";\r\nimport trashFill from \"../assets/icons/trash_fill.png\";\r\nimport editFill from \"../assets/icons/edit_fill.png\";\r\nimport orderFill from \"../assets/icons/order_fill.png\";\r\n\r\n\r\nexport default function Bill(){\r\n    const history = useHistory();\r\n    const parent = React.useRef(null);\r\n    const container = React.useRef(null)\r\n    const dispatch = useDispatch();\r\n    const [breadCrumbs, setBreadCrumbs] = React.useState([\"Հիմնական պատվերներ\"])\r\n    const {tableNumber, checked, menuItems} = useSelector(state => state.bill);\r\n    const {orderItems} = useSelector(state => state.table);\r\n    const item = orderItems[tableNumber];\r\n    let price = 0;\r\n    item.billItems.forEach(e => {price += e.amount * e.price})\r\n    React.useEffect(() => {\r\n        dispatch({type: \"HALL\", payload: \"Սրահ ։ Բառ\"})\r\n        dispatch({type: \"TABLE_NAME\", payload: \"Սեղան ։ \"+tableNumber})\r\n        dispatch({type: \"TITLE\", payload: \"\"})\r\n    })\r\n    const handleChange = (e) => {\r\n        const checkboxes = parent.current.getElementsByTagName(\"input\");\r\n        let checkedElem = e.target.checked;\r\n        for(let elem of checkboxes){\r\n            if(elem !== e.target){\r\n                elem.checked = false\r\n            }\r\n        }\r\n        const value = JSON.parse(e.target.value);\r\n        if(checkedElem){\r\n            dispatch({type: \"CHECKED\", payload: true})\r\n            dispatch({type: \"REMOVE_LINE_ITEM\", payload: value})\r\n        }else{\r\n            dispatch({type: \"CHECKED\", payload: false})\r\n            dispatch({type: \"REMOVE_LINE_ITEM\", payload: {}})\r\n        }\r\n    }\r\n    const checkedOff = () => {\r\n        const checkboxes = parent.current.getElementsByTagName(\"input\");\r\n        for(let elem of checkboxes){\r\n            elem.checked = false\r\n        }\r\n    }\r\n    const handleClick = (e) => {\r\n        const name = e.currentTarget.getAttribute(\"value\");\r\n        const arr = [];\r\n        Object.assign(arr, breadCrumbs)\r\n        arr.push(name)\r\n        setBreadCrumbs(arr)\r\n    }\r\n    const back = () => {\r\n        const arr = [];\r\n        Object.assign(arr, breadCrumbs)\r\n        arr.pop();\r\n        setBreadCrumbs(arr)\r\n    }\r\n    const goToRemoveLine = () => {\r\n        dispatch({type: \"REMOVE_LINE\", payload: true})\r\n    }\r\n    const goToEdit = () => {\r\n        dispatch({type: \"EDIT\", payload: true})\r\n    }\r\n    const goToPay = () => {\r\n        dispatch({type: \"PAY\", payload: true})\r\n    }\r\n    const up = () => {\r\n        container.current.scrollTo(0, container.current.scrollTop-=157);\r\n    }\r\n    const down = () => {\r\n        container.current.scrollTo(0, container.current.scrollTop+=157);\r\n    }\r\n    const addProduct = (name, price) => {\r\n        dispatch({type: \"ADD_PRODUCT\", payload: true})\r\n        dispatch({type: \"NEW_ORDER\", payload: {name,price}})\r\n    }\r\n    const toPayDone = () => {\r\n        dispatch({type: \"PAY_DONE\", payload: true})\r\n        setTimeout(() => {\r\n            const arr = {};\r\n            Object.assign(arr, orderItems);\r\n            arr[tableNumber] = {\r\n                type: \"none\",\r\n                count: 0,\r\n                billItems: []\r\n            };\r\n            dispatch({type: \"UPDATE_ORDER_COUNT\", payload: arr})\r\n            dispatch({type: \"PAY_DONE\", payload: false})\r\n            history.goBack();\r\n        }, 900);\r\n    }\r\n    return(\r\n        <div className={styles.box}>\r\n            <RemoveLine checkedOff={checkedOff}/>\r\n            <Edit checkedOff={checkedOff}/>\r\n            <Pay />\r\n            <PayDone />\r\n            <AddProduct />\r\n            <div className={styles.coupon}>\r\n                <h2>Կտրոն</h2>\r\n                <div className={styles.couponContent} ref={parent}>\r\n                    {\r\n                        item.billItems.map((e,index)=> {\r\n                            return(\r\n                                <div className={styles.item} key={\"coupon-item\"+index}>\r\n                                    <input type=\"checkbox\" name=\"orderLine\" onChange={handleChange} value={JSON.stringify(e)}/>\r\n                                    <div>\r\n                                        <h3>{e.name}</h3>\r\n                                        <h3>{e.amount} {e.amountName}</h3>\r\n                                        <h3>{e.price} Դր</h3>\r\n                                        <h3>{e.price * e.amount} Դր</h3>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n                <div className={styles.price}>\r\n                    <h3>ԸՆԴՀԱՆՈՒՐ <span>{price} դր</span></h3>\r\n                    <div>\r\n                        <button className={styles.btn} disabled={!checked} onClick={goToRemoveLine}>\r\n                            {!checked ? <img src={trash} /> : <img src={trashFill} />}\r\n                        </button>\r\n                        <button className={styles.btn} disabled={!checked ? true : false} onClick={goToEdit}>\r\n                            {!checked ? <img src={edit} /> : <img src={editFill} />}\r\n                        </button>\r\n                        <button className={styles.btn} onClick={goToPay}>\r\n                            <img src={orderFill} />\r\n                        </button>\r\n                        <button className={styles.pay} onClick={toPayDone}>ՎՃԱՐԵԼ</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className={styles.orders}>\r\n                <div className={styles.breadCrumbs}>\r\n                    {breadCrumbs.map((e, index) => <span key={\"span\"+index}>{e} /&nbsp;</span>)}\r\n                </div>\r\n                <div className={styles.meals} ref={container}>\r\n                    {\r\n                        menuItems.map((e, index) => {\r\n                            if(breadCrumbs.length === 1){\r\n                                    return(\r\n                                        <section key={`meal-${index}`} onClick={handleClick} value={e.name}>\r\n                                            <img src={e.img}/>\r\n                                            <h2>{e.name}</h2>\r\n                                        </section>\r\n                                    )\r\n                            }else if(breadCrumbs[1] === e.name){ \r\n                                return e.items.map((e, index) => {\r\n                                        return(\r\n                                            <section key={`meals-item-${index}`} name={e.name} price={e.price} onClick={() => addProduct(e.name, e.price)}>\r\n                                                <img src={e.img}/>\r\n                                                <h2>{e.name}</h2>\r\n                                            </section>\r\n                                        )\r\n                                })\r\n                            }\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n            <div className={styles.buttons}>\r\n                <button onClick={up}><img src={top} /></button>\r\n                <button onClick={back} disabled={breadCrumbs.length === 1 ? true : false}><img src={left}/></button>\r\n                <button onClick={down}><img src={bottom}/></button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}